browser()
}
}
}
source("select_files_to_read.R")
# select_files_to_read("Dec", 2019)
loadMultipleFiles <- function(nmonth = c("Dec"), nyear = c(2019)) {
year <- 1:length(nyear)
for (i in year) {
browser()
month <- 1:length(nmonth)
for (j in month) {
browser()
select_files_to_read(nmonth[j], nyear[i])
browser()
}
}
}
loadMultipleFiles(nmonth = c("Dec","Nov"))
source("select_files_to_read.R")
# select_files_to_read("Dec", 2019)
loadMultipleFiles <- function(nmonth = c("Dec"), nyear = c(2019)) {
year <- 1:length(nyear)
for (i in year) {
# browser()
month <- 1:length(nmonth)
for (j in month) {
# browser()
select_files_to_read(nmonth[j], nyear[i])
# browser()
}
}
}
loadMultipleFiles(nmonth = c("Dec","Nov"))
loadMultipleFiles(nmonth = c("Dec","Nov"))
myexport <- function(...) {
arg.list <- list(...)
names <- all.names(match.call())[-1]
for (i in seq_along(names)) assign(names[i],arg.list[[i]],.GlobalEnv)
}
fun <- function(a) {
ttt <- a+1
ttt2 <- a+2
myexport(ttt,ttt2)
return(a)
}
fun(1)
source("select_files_to_read.R")
# select_files_to_read("Dec", 2019)
myexport <- function(...) {
arg.list <- list(...)
names <- all.names(match.call())[-1]
for (i in seq_along(names)) assign(names[i],arg.list[[i]],.GlobalEnv)
}
loadMultipleFiles <- function(nmonth = c("Dec"), nyear = c(2019)) {
year <- 1:length(nyear)
for (i in year) {
# browser()
month <- 1:length(nmonth)
for (j in month) {
# browser()
select_files_to_read(nmonth[j], nyear[i])
# browser()
}
}
}
source("select_files_to_read.R")
# select_files_to_read("Dec", 2019)
myexport <- function(...) {
arg.list <- list(...)
names <- all.names(match.call())[-1]
for (i in seq_along(names)) assign(names[i],arg.list[[i]],.GlobalEnv)
}
loadMultipleFiles <- function(nmonth = c("Dec"), nyear = c(2019)) {
year <- 1:length(nyear)
for (i in year) {
# browser()
month <- 1:length(nmonth)
for (j in month) {
browser()
select_files_to_read(nmonth[j], nyear[i])
# browser()
}
}
}
loadMultipleFiles(nmonth = c("Dec","Nov"))
traceback()
fun <- function(a) {
ttt <- a+1
ttt2 <- a+2
myexport(ttt)
return(a)
}
#object not found error
fun(2)
rm(ttt,ttt2)
#object not found error
fun(2)
aaa <- "ttt"
get(aaa)
fun <- function(a) {
ttt <- a+1
ttt2 <- a+2
aaa <- "ttt"
myexport(get(aaa))
return(a)
}
#object not found error
fun(2)
#object not found error
fun(2)
get(aaa)
getElement(aaa)
get0(x = aaa)
fun <- function(a) {
ttt <- a+1
ttt2 <- a+2
aaa <- "ttt"
myexport(aaa)
return(a)
}
#object not found error
fun(2)
rm(aaa)
rm(ttt)
rm(get)
#object not found error
fun(2)
as.object_sizes(aaa)
source("select_files_to_read.R")
# select_files_to_read("Dec", 2019)
myexport <- function(...) {
arg.list <- list(...)
names <- all.names(match.call())[-1]
for (i in seq_along(names)) assign(names[i],arg.list[[i]],.GlobalEnv)
}
loadMultipleFiles <- function(nmonth = c("Dec"), nyear = c(2019)) {
year <- 1:length(nyear)
for (i in year) {
# browser()
month <- 1:length(nmonth)
for (j in month) {
browser()
select_files_to_read(nmonth[j], nyear[i])
mv(from = "tempfilename", to = xlsname)
rm(xlsname)
}
}
}
loadMultipleFiles(nmonth = c("Dec","Nov"))
a
source("select_files_to_read.R")
# select_files_to_read("Dec", 2019)
myexport <- function(...) {
arg.list <- list(...)
names <- all.names(match.call())[-1]
for (i in seq_along(names)) assign(names[i],arg.list[[i]],.GlobalEnv)
}
loadMultipleFiles <- function(nmonth = c("Dec"), nyear = c(2019)) {
year <- 1:length(nyear)
for (i in year) {
# browser()
month <- 1:length(nmonth)
for (j in month) {
browser()
select_files_to_read(nmonth[j], nyear[i])
mv(from = "tempfilename", to = xlsname) %>% myexport()
rm(xlsname)
}
}
}
source("select_files_to_read.R")
# select_files_to_read("Dec", 2019)
myexport <- function(...) {
arg.list <- list(...)
names <- all.names(match.call())[-1]
for (i in seq_along(names)) assign(names[i],arg.list[[i]],.GlobalEnv)
}
loadMultipleFiles <- function(nmonth = c("Dec"), nyear = c(2019)) {
year <- 1:length(nyear)
for (i in year) {
# browser()
month <- 1:length(nmonth)
for (j in month) {
# browser()
select_files_to_read(nmonth[j], nyear[i])
mv(from = "tempfilename", to = xlsname) %>% myexport()
rm(xlsname)
}
}
}
loadMultipleFiles(nmonth = c("Dec","Nov"))
fun <- function(a) {
ttt <- a+1
ttt2 <- a+2
aa <- "bb"
mv(from = "ttt", to = aa) %>% myexport()
return(a)
}
rm(aaa)
#object not found error
fun(2)
#object not found error
fun(2)
#[1] 2
print(ttt)
#object not found error
fun(2)
?'%>%'
ttt <- a+1
aa <- "bb"
mv(from = "ttt", to = aa)
ttt <- a+1
ttt <- 2+1
mv(from = "ttt", to = aa)
fun <- function(a) {
ttt <- 2+1
ttt2 <- a+2
aa <- "bb"
mv(from = "ttt", to = aa) %>% myexport(x = .)
return(a)
}
rm(aa,bb)
#object not found error
fun(2)
library(magrittr)
fun <- function(a) {
ttt <- 2+1
ttt2 <- a+2
aa <- "bb"
mv(from = "ttt", to = aa) %>% myexport(arg = .)
return(a)
}
#object not found error
fun(2)
fun <- function(a) {
ttt <- 2+1
ttt2 <- a+2
aa <- "bb"
browser()
mv(from = "ttt", to = aa) %>% myexport(arg = .)
browser()
return(a)
}
#object not found error
fun(2)
fun <- function(a) {
ttt <- 2+1
ttt2 <- a+2
aa <- "bb"
browser()
myexport(arg = mv(from = "ttt", to = aa))
browser()
return(a)
}
fun <- function(a) {
ttt <- 2+1
ttt2 <- a+2
aa <- "bb"
browser()
myexport(arg = mv(from = "ttt", to = aa))
browser()
return(a)
}
#object not found error
fun(2)
rm(mv)
fun <- function(a) {
ttt <- 2+1
ttt2 <- a+2
aa <- "bb"
# browser()
myexport(arg = mv(from = "ttt", to = aa))
# browser()
return(a)
}
#object not found error
fun(2)
names(xlsname)
names(xlsname) = "abc"
xlsname
globalenv()
environment()
fun <- function(a) {
ttt <- 2+1
ttt2 <- a+2
aa <- "bb"
a <- environment()
browser()
myexport(arg = mv(from = "ttt", to = aa))
# browser()
return(a)
}
#object not found error
fun(2)
a
globalenv()
as.character(xlsname)
xlsname <- as.character(xlsname)
as.object_sizes(xlsname)
.Alias(xlsname)
new <- .Alias(xlsname)
rename(xlsname)
makeActiveBinding(xlsname, function() tempfilename, .GlobalEnv)
Nov2019
as.data.frame(makeActiveBinding(xlsname, function() tempfilename, .GlobalEnv))
head(Nov2019)
as.data.frame(Nov2019)
Nov2019 <- as.data.frame(Nov2019)
Nov2019 <- as.table(Nov2019)
Nov2019 <- as.data.frame(Nov2019)
as.data.frame(Nov2019)
head(tempfilename)
class(Nov2019)
head(Nov2019)
tempfilename
source("select_files_to_read.R")
# select_files_to_read("Dec", 2019)
myexport <- function(...) {
arg.list <- list(...)
names <- all.names(match.call())[-1]
for (i in seq_along(names)) assign(names[i],arg.list[[i]],.GlobalEnv)
}
loadMultipleFiles <- function(nmonth = c("Dec"), nyear = c(2019)) {
year <- 1:length(nyear)
for (i in year) {
# browser()
month <- 1:length(nmonth)
for (j in month) {
# browser()
select_files_to_read(nmonth[j], nyear[i])
# mv(from = "tempfilename", to = xlsname) %>% myexport()
# rm(xlsname)
# assign()
}
}
}
loadMultipleFiles(nmonth = c("Dec","Nov"))
class(Dec2019)
a <- Dec2019
rm(Dec2019)
a <- Dec2019
rm(Dec2019)
head(a)
Dec2019 <- a
rm(a)
Nov2019 <- Nov2019
a <- Nov2019; rm(Nov2019); Nov2019 <- a; rm(a)
lists <- list(Dec2019, Nov2019)
head(lists)
head(lists[[1]])
?list
colnames(lists) <- c("Dec2019","Nov2019")
namess(lists) <- c("Dec2019","Nov2019")
names(lists) <- c("Dec2019","Nov2019")
lists
lists$Dec2019[1]
lists$Dec2019
as.data.frame(lists$Dec2019)
xlsnames <- c("Dec2019","Nov2019")
files <- c(Dec2019, Nov2019)
lists <- list(Dec2019, Nov2019)
names(lists) <- c(xlsnames[1],xlsnames[2])
xlsnames[1]
lists[1]
lists[1][]
names(lists)
names(lists)[1]
for(i in 2011:2020) {
assign(paste0("test", i), i)
}
assign(paste0("test", 2011), 2011)
class(assign(paste0("test", 2011), 2011))
a <- Dec2019; rm(Dec2019)
assign(names(lists)[1], as.data.frame(lists$Dec2019))
emptyList <- list()
lists[[3]] <- a
?return
rm(Dec2019, Nov2019, files, lists, tempfilename, a, emptyList)
source("select_files_to_read.R")
# select_files_to_read("Dec", 2019)
myexport <- function(...) {
arg.list <- list(...)
names <- all.names(match.call())[-1]
for (i in seq_along(names)) assign(names[i],arg.list[[i]],.GlobalEnv)
}
loadMultipleFiles <- function(nmonth = c("Dec"), nyear = c(2019)) {
files_list <- list()
year <- 1:length(nyear)
totalIterate <<- length(nmonth) * length(nyear)
for (i in year) {
# browser()
month <- 1:length(nmonth)
for (j in month) {
# browser()
select_files_to_read(nmonth[j], nyear[i])
files_list[[j]] <- tempfilename
names(files_list)[j] <- xlsname
browser()
}
}
return(files_list)
}
loadMultipleFiles(nmonth = c("Dec","Nov"))
loadMultipleFiles(nmonth = c("Dec","Nov"))
for (k in 1:totalIterate) {
browser()
assign(names(files_list)[k], as.data.frame(files_list[[k]]))
browser()
}
q()
stop()
a
exit()
quit()
knitr::opts_chunk$set(echo = TRUE)
source("select_files_to_read.R")
# select_files_to_read("Dec", 2019)
myexport <- function(...) {
arg.list <- list(...)
names <- all.names(match.call())[-1]
for (i in seq_along(names)) assign(names[i],arg.list[[i]],.GlobalEnv)
}
loadMultipleFiles <- function(nmonth = c("Dec"), nyear = c(2019)) {
files_list <- list()
year <- 1:length(nyear)
totalIterate <<- length(nmonth) * length(nyear)
for (i in year) {
# browser()
month <- 1:length(nmonth)
for (j in month) {
# browser()
select_files_to_read(nmonth[j], nyear[i])
files_list[[j]] <- tempfilename
names(files_list)[j] <- xlsname
browser()
}
}
return(files_list)
}
loadMultipleFiles(nmonth = c("Dec","Nov"))
knitr::opts_chunk$set(echo = TRUE)
library('xlsx')
library('rvest')
library('gdata')
get_xls_file_from_html <- function() {
dataurl <- "https://www.glassdoor.com/research/job-market-report-historical/"
page <- read_html(dataurl)
excels1 <- grep("\\.xlsx", html_nodes(page, "a"), value = T)
excels2 <- gsub(".*href=\"", "", excels1)
excels <- gsub("xlsx.*", "xlsx", excels2)
excels_path <- as.character(sapply(excels,
FUN = substr,
start = 64,
stop = max(sapply(excels, nchar))))
excels_path1_31 <- gsub(".*data-", "", excels_path[1:31])
excels_path[32] <- "2017-05.xlsx"
excels_path[33] <- "2017-04.xlsx"
excels_path[34] <- "2017-03.xlsx"
excels_path[35] <- "2017-02.xlsx"
excels_path[36] <- "2017-01.xlsx"
excels_path[37] <- "2016-12.xlsx"
excels_path[38] <- "2016-11.xlsx"
excels_path[39] <- "2016-10.xlsx"
excels_path <- c(excels_path1_31, excels_path[32:39])
destination <- paste("./datasets/", excels_path, sep = "")
#file extraction
mapply(function(x, y) download.file(x, y, mode="wb"), x = excels, y = destination)
}
load("filespath.RData")
if (!file.exists(filespath)) {
get_xls_file_from_html
}
# check_if_fileexist <- function(){
#     if (!file.exists(filespath)) {
#         get_xls_file_from_html
#     }
# }
# mapply(check_if_fileexist)
source("select_files_to_read.R")
# select_files_to_read("Dec", 2019)
myexport <- function(...) {
arg.list <- list(...)
names <- all.names(match.call())[-1]
for (i in seq_along(names)) assign(names[i],arg.list[[i]],.GlobalEnv)
}
loadMultipleFiles <- function(nmonth = c("Dec"), nyear = c(2019)) {
files_list <- list()
year <- 1:length(nyear)
totalIterate <<- length(nmonth) * length(nyear)
for (i in year) {
# browser()
month <- 1:length(nmonth)
for (j in month) {
# browser()
select_files_to_read(nmonth[j], nyear[i])
files_list[[j]] <- tempfilename
names(files_list)[j] <- xlsname
browser()
}
}
return(files_list)
}
loadMultipleFiles(nmonth = c("Dec","Nov"))
files_list
files_list$Dec2019
for (k in 1:totalIterate) {
browser()
assign(names(files_list)[k], as.data.frame(files_list[[k]]))
browser()
}
q()
